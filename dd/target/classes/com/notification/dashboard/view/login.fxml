<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.RadioButton?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.control.ToggleGroup?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<StackPane xmlns="http://javafx.com/javafx/17.0.2-ea" 
           xmlns:fx="http://javafx.com/fxml/1" 
           fx:controller="com.notification.dashboard.controller.LoginController"
           stylesheets="/css/login.css">
    
    <!-- Main Container -->
    <StackPane fx:id="mainContainer" StackPane.alignment="CENTER">
        
        <!-- Login Form (Default) -->
        <VBox fx:id="loginForm" spacing="0" StackPane.alignment="CENTER">
            
            <!-- Main Horizontal Container -->
            <HBox fx:id="mainHBox" maxWidth="1200" maxHeight="800"
                  minWidth="800" minHeight="500">
                
                <!-- Left Panel (Purple) -->
                <VBox fx:id="leftPanel" styleClass="left-panel" 
                      HBox.hgrow="ALWAYS">
                    
                    <VBox alignment="CENTER" spacing="20" VBox.vgrow="ALWAYS"
                          style="-fx-padding: 40 30 40 30;">
                        
                        <!-- Logo/Title -->
                        <VBox alignment="CENTER" spacing="10">
                            <ImageView fitHeight="80" fitWidth="80" preserveRatio="true"
                                       style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 5);">
                                <Image url="@../../../images/logo.png" />
                            </ImageView>
                            <Label text="WELCOME TO NOTIFICATION ENGINE" styleClass="left-panel-title" 
                                   wrapText="true" textAlignment="CENTER"/>
                            <Label text="Instant Notification Engine" styleClass="left-panel-subtitle" 
                                   wrapText="true" textAlignment="CENTER"/>
                        </VBox>
                        
                        <!-- Benefits Section -->
                        <VBox fx:id="benefitsContainer" spacing="25" 
                              style="-fx-padding: 40 0 0 0;" VBox.vgrow="ALWAYS">
                            
                            <!-- Benefit 1 -->
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Region prefWidth="40" prefHeight="40" styleClass="benefit-icon-container" />
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label text="Instant Notification Engine" styleClass="benefit-title" 
                                           wrapText="true"/>
                                    <Label text="Real-time notification delivery system" 
                                           styleClass="benefit-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                            
                            <!-- Benefit 2 -->
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Region prefWidth="40" prefHeight="40" styleClass="benefit-icon-container" />
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label text="Multi-channel Support" styleClass="benefit-title" 
                                           wrapText="true"/>
                                    <Label text="Email, SMS, and Push notifications" 
                                           styleClass="benefit-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                            
                            <!-- Benefit 3 -->
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Region prefWidth="40" prefHeight="40" styleClass="benefit-icon-container" />
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label text="Advanced Analytics" styleClass="benefit-title" 
                                           wrapText="true"/>
                                    <Label text="Track delivery and engagement metrics" 
                                           styleClass="benefit-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </VBox>
                        
                        <!-- Footer -->
                        <VBox alignment="CENTER" spacing="5" style="-fx-padding: 30 0 0 0;">
                            <Label text="© 2024 Instant Notification Engine" styleClass="copyright-text" 
                                   wrapText="true"/>
                            <Label text="All rights reserved" styleClass="copyright-text" />
                        </VBox>
                    </VBox>
                </VBox>
                
                <!-- Right Panel (Login Form) -->
                <VBox fx:id="rightPanel" styleClass="right-panel" 
                      HBox.hgrow="ALWAYS">
                    
                    <VBox alignment="CENTER_LEFT" spacing="30"
                          style="-fx-padding: 40 35 40 35;">
                        
                        <!-- Welcome Section -->
                        <VBox spacing="10">
                            <Label text="Welcome Back!" styleClass="welcome-title" 
                                   wrapText="true"/>
                            <Label text="Please sign in to your account" styleClass="welcome-subtitle" 
                                   wrapText="true"/>
                        </VBox>
                        
                        <!-- Login Form -->
                        <VBox styleClass="login-form" spacing="25" VBox.vgrow="ALWAYS">
                            
                            <!-- Username/Email Field -->
                            <VBox spacing="8">
                                <Label text="Username or Email" styleClass="form-label" />
                                <TextField fx:id="usernameField" 
                                           promptText="Enter your username or email" 
                                           styleClass="form-input" />
                            </VBox>
                            
                            <!-- Password Field -->
                            <VBox spacing="8">
                                <HBox alignment="CENTER_LEFT" spacing="5">
                                    <Label text="Password" styleClass="form-label" />
                                    <Region HBox.hgrow="ALWAYS" />
                                    <Hyperlink fx:id="forgotPasswordLink" 
                                               text="Forgot password?" 
                                               styleClass="forgot-password-link" />
                                </HBox>
                                
                                <HBox fx:id="passwordContainer" spacing="10">
                                    <PasswordField fx:id="passwordField" 
                                                   promptText="Enter your password" 
                                                   HBox.hgrow="ALWAYS" 
                                                   styleClass="form-input" />
                                    <TextField fx:id="visiblePasswordField" 
                                               promptText="Enter your password" 
                                               HBox.hgrow="ALWAYS" 
                                               styleClass="form-input" 
                                               visible="false" managed="false" />
                                </HBox>
                                
                                <!-- Show Password Checkbox -->
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <CheckBox fx:id="showPasswordCheckbox" 
                                              text="Show password" 
                                              styleClass="checkbox-login" />
                                </HBox>
                            </VBox>
                            
                            <!-- Remember Me & Login Button -->
                            <VBox spacing="20">
                                <HBox alignment="CENTER_LEFT" spacing="10">
                                    <CheckBox fx:id="rememberMeCheckbox" 
                                              text="Remember me" 
                                              styleClass="checkbox-login" />
                                    <Region HBox.hgrow="ALWAYS" />
                                </HBox>
                                
                                <Button fx:id="loginButton" 
                                        text="Sign In" 
                                        styleClass="login-button" />
                            </VBox>
                        </VBox>
                        
                        <!-- Registration Link -->
                        <VBox alignment="CENTER" spacing="10" style="-fx-padding: 20 0 0 0;">
                            <Label text="Don't have an account?" styleClass="form-footer" 
                                   wrapText="true"/>
                            <HBox alignment="CENTER" spacing="5">
                                <Label text="Create a new account" styleClass="form-footer" />
                                <Hyperlink fx:id="registerLink" 
                                           text="Register here" 
                                           styleClass="form-footer-link" />
                            </HBox>
                        </VBox>
                    </VBox>
                </VBox>
            </HBox>
        </VBox>
        
        <!-- Registration Form (Hidden by default) -->
        <VBox fx:id="registerForm" spacing="0" visible="false" StackPane.alignment="CENTER">
            
            <!-- Main Horizontal Container for Registration -->
            <HBox fx:id="regMainHBox" maxWidth="1200" maxHeight="800"
                  minWidth="800" minHeight="500">
                
                <!-- Left Panel for Registration -->
                <VBox styleClass="left-panel" 
                      HBox.hgrow="ALWAYS">
                    
                    <VBox alignment="CENTER" spacing="20" VBox.vgrow="ALWAYS"
                          style="-fx-padding: 40 30 40 30;">
                        
                        <!-- Logo/Title for Registration -->
                        <VBox alignment="CENTER" spacing="10">
                            <ImageView fitHeight="80" fitWidth="80" preserveRatio="true"
                                       style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.2), 10, 0, 0, 5);">
                                <Image url="@../../../images/logo.png" />
                            </ImageView>
                            <Label text="JOIN OUR COMMUNITY" styleClass="left-panel-title" 
                                   wrapText="true" textAlignment="CENTER"/>
                            <Label text="Instant Notification Engine" styleClass="left-panel-subtitle" 
                                   wrapText="true" textAlignment="CENTER"/>
                        </VBox>
                        
                        <!-- Benefits Section for Registration -->
                        <VBox spacing="25" style="-fx-padding: 40 0 0 0;" VBox.vgrow="ALWAYS">
                            
                            <!-- Benefit 1 -->
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Region prefWidth="40" prefHeight="40" styleClass="benefit-icon-container" />
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label text="Real-time Notifications" styleClass="benefit-title" 
                                           wrapText="true"/>
                                    <Label text="Send instant alerts to users" 
                                           styleClass="benefit-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                            
                            <!-- Benefit 2 -->
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Region prefWidth="40" prefHeight="40" styleClass="benefit-icon-container" />
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label text="User Management" styleClass="benefit-title" 
                                           wrapText="true"/>
                                    <Label text="Manage user roles and permissions" 
                                           styleClass="benefit-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                            
                            <!-- Benefit 3 -->
                            <HBox spacing="15" alignment="CENTER_LEFT">
                                <Region prefWidth="40" prefHeight="40" styleClass="benefit-icon-container" />
                                <VBox spacing="5" HBox.hgrow="ALWAYS">
                                    <Label text="Analytics Dashboard" styleClass="benefit-title" 
                                           wrapText="true"/>
                                    <Label text="Track all your notification activities" 
                                           styleClass="benefit-description" wrapText="true"/>
                                </VBox>
                            </HBox>
                        </VBox>
                        
                        <!-- Footer -->
                        <VBox alignment="CENTER" spacing="5" style="-fx-padding: 30 0 0 0;">
                            <Label text="© 2024 Instant Notification Engine" styleClass="copyright-text" 
                                   wrapText="true"/>
                            <Label text="All rights reserved" styleClass="copyright-text" />
                        </VBox>
                    </VBox>
                </VBox>
                
                <!-- Right Panel (Registration Form) -->
                <VBox alignment="TOP_CENTER" styleClass="right-panel" 
                      HBox.hgrow="ALWAYS">
                    
                    <!-- Back Button at the top -->
                    <VBox alignment="TOP_LEFT" style="-fx-padding: 20 0 10 20;">
                        <Button fx:id="regBackButton" 
                                text="← Back to Sign In" 
                                styleClass="clear-back-button" />
                    </VBox>
                    
                    <VBox alignment="CENTER_LEFT" spacing="25" 
                          style="-fx-padding: 0 35 40 35;" VBox.vgrow="ALWAYS">
                        
                        <!-- Welcome Section -->
                        <VBox spacing="10">
                            <Label text="Create Account" styleClass="welcome-title" 
                                   wrapText="true"/>
                            <Label text="Join our notification platform" styleClass="welcome-subtitle" 
                                   wrapText="true"/>
                        </VBox>
                        
                        <!-- Registration Form with ScrollPane -->
                        <ScrollPane fx:id="regScrollPane" 
                                    hbarPolicy="NEVER" 
                                    vbarPolicy="AS_NEEDED"
                                    fitToWidth="true"
                                    style="-fx-background-color: transparent; -fx-border-color: transparent;">
                            
                            <VBox styleClass="login-form" spacing="18">
                                
                                <!-- Username Field -->
                                <VBox spacing="8">
                                    <Label text="Username *" styleClass="form-label" />
                                    <TextField fx:id="regUsernameField" 
                                               promptText="Choose a username" 
                                               styleClass="form-input" />
                                    <Label fx:id="regUsernameError" styleClass="error-message" 
                                           visible="false" wrapText="true"/>
                                </VBox>
                                
                                <!-- Email Field -->
                                <VBox spacing="8">
                                    <Label text="Email Address *" styleClass="form-label" />
                                    <TextField fx:id="regEmailField" 
                                               promptText="Enter your email" 
                                               styleClass="form-input" />
                                    <Label fx:id="regEmailError" styleClass="error-message" 
                                           visible="false" wrapText="true"/>
                                </VBox>
                                
                                <!-- Password Field -->
                                <VBox spacing="8">
                                    <Label text="Password *" styleClass="form-label" />
                                    <HBox fx:id="regPasswordContainer" spacing="10">
                                        <PasswordField fx:id="regPasswordField" 
                                                       promptText="Create a password" 
                                                       HBox.hgrow="ALWAYS" 
                                                       styleClass="form-input" />
                                        <TextField fx:id="regVisiblePasswordField" 
                                                   promptText="Create a password" 
                                                   HBox.hgrow="ALWAYS" 
                                                   styleClass="form-input" 
                                                   visible="false" managed="false" />
                                    </HBox>
                                    <Label fx:id="regPasswordError" styleClass="error-message" 
                                           visible="false" wrapText="true"/>
                                </VBox>
                                
                                <!-- Confirm Password Field -->
                                <VBox spacing="8">
                                    <Label text="Confirm Password *" styleClass="form-label" />
                                    <PasswordField fx:id="regConfirmPasswordField" 
                                                   promptText="Confirm your password" 
                                                   styleClass="form-input" />
                                    <Label fx:id="regConfirmPasswordError" styleClass="error-message" 
                                           visible="false" wrapText="true"/>
                                </VBox>
                                
                                <!-- Show Password Checkbox -->
                                <HBox spacing="10" alignment="CENTER_LEFT">
                                    <CheckBox fx:id="regShowPasswordCheckbox" 
                                              text="Show password" 
                                              styleClass="checkbox-login" />
                                </HBox>
                                
                                <!-- Role Selection -->
                                <VBox spacing="8">
                                    <Label text="Account Type" styleClass="form-label" />
                                    <HBox spacing="20">
                                        <fx:define>
                                            <ToggleGroup fx:id="roleGroup" />
                                        </fx:define>
                                        <RadioButton fx:id="regUserRole" 
                                                     text="Regular User" 
                                                     selected="true" 
                                                     toggleGroup="$roleGroup" />
                                        <RadioButton fx:id="regAdminRole" 
                                                     text="Administrator" 
                                                     toggleGroup="$roleGroup" />
                                    </HBox>
                                    <Label fx:id="regRoleError" styleClass="error-message" 
                                           visible="false" wrapText="true"/>
                                </VBox>
                                
                                <!-- Terms and Conditions -->
                                <VBox spacing="8">
                                    <HBox spacing="10" alignment="CENTER_LEFT">
                                        <CheckBox fx:id="regTermsCheckbox" />
                                        <HBox spacing="5">
                                            <Label text="I agree to the" />
                                            <Hyperlink fx:id="termsLink" 
                                                       text="Terms and Conditions" 
                                                       styleClass="form-footer-link" />
                                        </HBox>
                                    </HBox>
                                    <Label fx:id="regTermsError" styleClass="error-message" 
                                           visible="false" wrapText="true"/>
                                </VBox>
                                
                                <!-- Register Button -->
                                <VBox spacing="15" style="-fx-padding: 10 0 0 0;">
                                    <Button fx:id="registerButton" 
                                            text="Create Account" 
                                            styleClass="login-button"
                                            onAction="#handleRegistration" />
                                    
                                    <!-- Alternative Back Button -->
                                    <Button fx:id="altBackButton" 
                                            text="← Back to Sign In" 
                                            styleClass="secondary-back-button" />
                                </VBox>
                            </VBox>
                        </ScrollPane>
                        
                        <!-- Back to Login Link -->
                        <VBox alignment="CENTER" spacing="10" style="-fx-padding: 20 0 0 0;">
                            <HBox alignment="CENTER" spacing="5">
                                <Label text="Already have an account?" styleClass="form-footer" />
                                <Hyperlink fx:id="backToLoginLink" 
                                           text="Sign in here" 
                                           styleClass="form-footer-link" />
                            </HBox>
                        </VBox>
                    </VBox>
                </VBox>
            </HBox>
        </VBox>
    </StackPane>
</StackPane>